(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var c=n.getElementsByTagName("script");c.length&&(t=c[c.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})(),e.p,e.p,e.p;var t={baseUrl:"https://api.spoonacular.com/",ingredientSearch:"https://api.spoonacular.com/food/ingredients/search",recipeSearch:"https://api.spoonacular.com/recipes/findByIngredients",analyzeInstructions:"https://api.spoonacular.com/recipes",complexSearch:"https://api.spoonacular.com/recipes/complexSearch",ingredientInfo:e=>"https://api.spoonacular.com/food/ingredients/".concat(e,"/information"),random:"https://api.spoonacular.com/recipes/random",key:null};function n(e,t){var n=document.createElement("ul");return n.setAttribute("class","single_recipe_list list_unstyled"),n.innerHTML='<h3 class="modal_content_sub">'.concat(t,": </h3>"),e.forEach((e=>{var t=document.createElement("li");t.setAttribute("class","single_recipe_list_item"),t.innerHTML="\n            <p>".concat(e.amount," ").concat(e.unit," ").concat(e.name,"</p>\n        "),n.appendChild(t)})),n}function c(e,t,n,c,i,o,a){try{var l=e[o](a),r=l.value}catch(e){return void n(e)}l.done?t(r):Promise.resolve(r).then(c,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function l(e){c(a,i,o,l,r,"next",e)}function r(e){c(a,i,o,l,r,"throw",e)}l(void 0)}))}}function o(e,t){var n={};n.id=e.id,n.data=e,n.instructions=t||"none",function(e){var t=JSON.stringify(e);localStorage.setItem("".concat(e.id),t)}(n)}function a(e,t){var c=document.getElementById("".concat(e.id,"-modal")),i=document.createElement("div");i.setAttribute("class","modal-content");var o=document.getElementById("".concat(e.id,"-modal-header")),a=document.createElement("img"),l=document.createElement("button");l.innerText="Save",l.setAttribute("class","btn btn-light save"),l.addEventListener("click",(t=>{var n;n=e.id,localStorage.saved?localStorage.saved.indexOf(toString(n))>0?console.log("id found"):localStorage.saved+=", ".concat(n):localStorage.setItem("saved","".concat(n)),console.log(localStorage);var c,i=document.getElementById("recipe_center_section"),a=document.createElement("li"),l=((c=document.createElement("div")).setAttribute("class","recently_viewed"),c.id="saved",c.innerHTML='\n    <a name="saved"></a>\n    <h3 class="result_box_item recipe">Saved</h3>\n    <ul id="saved-recipes" class="result_box_item recipe breadcrumb">\n    </ul>',c);a.setAttribute("class","breadcrumb-item fake_tag"),a.innerText=e.title,a.addEventListener("click",(e=>{"none"===o.style.display?o.style.display="block":o.style.display="none"}));var r=document.getElementById("saved");r&&r.lastChild.innerText!==a.innerText?r.appendChild(a):r||(l.appendChild(a),i.appendChild(l));var s=document.getElementById("saved");o.style.display="none",s.scrollIntoView()}));var r,s,d=document.createElement("p");d.innerHTML="No instructions came up... Sorry :(",a.src="".concat(e.image),r=e.missedIngredientCount>0?n(e.missedIngredients,"ingredients missing"):n([{amount:0,unit:"",name:""}],"ingredients missing"),e.usedIngredientCount>0?s=n(e.usedIngredients,"ingredients used"):r=n([{amount:0,unit:"",name:""}],"ingredients used"),i.innerHTML="<h2>".concat(e.title,"</h2>"),i.appendChild(r),i.appendChild(s),i.appendChild(l),t?i.appendChild(t):i.appendChild(d),o.appendChild(i),c.appendChild(o)}function l(e){return fetch("".concat(t.analyzeInstructions,"/").concat(e,"/analyzedInstructions?apiKey=").concat(t.key)).then((e=>e.json())).then((e=>e)).catch((e=>console.error(e)))}function r(){return(r=i((function*(e,t){l(e).then(function(){var e=i((function*(e){var n,c=yield e;c?o(t,c):o(t),c.length&&c[0].steps.length>0&&(n=s(c[0].steps)),n?a(t,n):a(t)}));return function(t){return e.apply(this,arguments)}}())}))).apply(this,arguments)}function s(e){var t=document.createElement("ul");t.setAttribute("class","single_recipe_list list_unstyled instructions_list"),t.innerHTML='<h3 class="modal_content_sub" >Instructions: </h3>';var n=document.createElement("ul");n.setAttribute("class","single_recipe_list_eq list_unstyled"),n.innerHTML='<h3 class="modal_content_sub">Equipment: </h3>';var c=!1;return e.forEach((e=>{e.equipment.length>0&&(c=!0,e.equipment.forEach((e=>{var t=document.createElement("li");t.innerHTML="<p>".concat(e.name,"</p>"),n.appendChild(t)})));var i=document.createElement("li");i.innerHTML='\n        <p class="modal_content_list_p" >'.concat(e.number,": ").concat(e.step,"</p>"),t.appendChild(i)})),c&&t.appendChild(n),t}function d(e,t,n,c,i,o,a){try{var l=e[o](a),r=l.value}catch(e){return void n(e)}l.done?t(r):Promise.resolve(r).then(c,i)}var u=document.getElementById("food_container"),m=document.getElementById("add_to_list"),p=document.getElementById("clear_photos"),h=document.getElementById("submit_query"),g=document.getElementById("email_results_btn"),v=document.getElementById("test_email"),y=document.getElementById("num_select"),f=document.getElementById("query_bar"),E=document.getElementById("ingredient_list_ul"),b=(document.getElementById("filter_results"),document.getElementById("meal_type")),_=document.createElement("button");_.setAttribute("class","btn btn-dark"),_.innerHTML="I want to see the checkbox results",_.addEventListener("click",(e=>{console.log(function(e){for(var t=[],n=1;n<e.childElementCount;n++){var c=e.children[n];c.lastChild.checked&&t.push("".concat(c.lastChild.name))}return t}(b))})),u.appendChild(_);var I=document.getElementById("toggle_nutrition"),C=document.getElementById("nutrition_table"),k=document.getElementById("nutrition_header");h.addEventListener("click",function(){var e,t=(e=function*(e){for(var t,n=[...E.children],c=y.value,i=!c||c<=0?L(n):L(n,c);u.firstChild;)u.removeChild(u.firstChild);yield(t=i,new Promise((()=>{S.findRecipes(t)}),(e=>console.log(e))))},function(){var t=this,n=arguments;return new Promise((function(c,i){var o=e.apply(t,n);function a(e){d(o,c,i,a,l,"next",e)}function l(e){d(o,c,i,a,l,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}()),g.addEventListener("click",(e=>{!function(){console.log(localStorage);var e=document.getElementById("email_results").value,t=localStorage.saved.split(", ");console.log(t);var n=[],c=function(e){localStorage[e]&&t.forEach((t=>{t===e&&n.push(localStorage[e])}))};for(var i in localStorage)c(i);var o=n.map((e=>JSON.parse(e)));console.log("recipes to email",o),console.log(e),T(o,e),localStorage.setItem("saved",null)}()})),v.addEventListener("click",(e=>{T()})),y.addEventListener("change",(e=>{y.value=e.target.value})),m.addEventListener("click",(e=>{if(e.target){var t=[...E.children],n=f.value;if(function(e,t){for(var n=0;n<e.length;n++)if(e[n].id===t)return!0;return!1}(t,n=n.replace(/\W+/g,"")))return f.value="",!1;var c=document.createElement("li");(i=c,o=[{attribute:"class",value:"ingredient_li tag-remove"},{attribute:"id",value:n},{attribute:"onclick",value:"removeIngredient(".concat(n,")")}],o.forEach((e=>{var t=e.attribute,n=e.value;i.setAttribute(t,n)})),c=i).innerHTML=n,f.value="",S.ingredients.push(c),E.appendChild(c)}var i,o})),p.addEventListener("click",(e=>{for(;u.firstChild;)u.removeChild(u.firstChild)})),I.addEventListener("click",(e=>{C.classList.toggle("table_hidden"),k.classList.toggle("table_hidden")}));var S=new class{constructor(){this.ingredients=[],this.recipes={},this.photos={}}getIngredients(e){fetch("".concat(t.ingredientSearch,"?").concat(e)).then((e=>e.json())).then((e=>e)).catch((e=>console.error(e)))}complexFind(e){fetch("".concat(t.complexSearch,"?").concat(e)).then((e=>e.json())).then((e=>this.resolve(e))).catch((e=>console.error(e)))}findRecipes(e){fetch("".concat(t.recipeSearch,"?").concat(e)).then((e=>e.json())).then((e=>this.resolve(e))).catch((e=>console.error(e)))}fallBackRequest(e){fetch("".concat(t.random)).then((e=>e.json())).then((e=>e)).catch(err)}resolve(e){console.log("now resolving response, calling showRecipes with this"),console.log("what does this look like?",e),e.forEach((e=>{var t,n,c=document.createElement("div"),i=document.createElement("img"),o=(t=e.id,(n=document.createElement("div")).innerHTML='\n    <button id="'.concat(t,'-btn" class="btn btn-dark">View</button>\n        <div id="').concat(t,'-modal-header" class="modal" style=\'display: none\'>\n         <span class="close">&times;</span>\n        </div>'),n.id="".concat(t,"-modal"),n);i.src=e.image,c.innerHTML=e.title,c.setAttribute("id",e.id),c.setAttribute("class","food_container_card"),i.setAttribute("class","food_container_img"),c.appendChild(i),c.appendChild(o),u.appendChild(c),function(e,t){var n=document.getElementById("".concat(t,"-modal-header")),c=document.getElementById("".concat(t,"-btn")),i=document.getElementsByClassName("close")[0],o=document.getElementById("recent"),a=document.createElement("li");a.addEventListener("click",(e=>{"none"===n.style.display?n.style.display="block":n.style.display="none"})),a.innerText=e.title,a.setAttribute("class","breadcrumb-item fake_tag"),c.addEventListener("click",(e=>{"none"===n.style.display&&o.lastChild.innerText!==a.innerText?(o.appendChild(a),n.style.display="block"):"none"===n.style.display&&o.lastChild.innerText===a.innerText?n.style.display="block":n.style.display="none"})),i.addEventListener("click",(e=>{n.style.display="none"})),window.addEventListener("click",(e=>{e.target==n&&(n.style.display="none")}))}(e,e.id),function(e,t){r.apply(this,arguments)}(e.id,e)}))}};function L(e,n){var c,i=n>0?n:12;return console.log(n),e.length>0&&(c=e.reduce(((e,t)=>e+(t.id+",")),"")),c="ingredients=".concat(c.slice(0,c.length-1)),"apiKey=".concat(t.key,"&").concat(c,"&number=").concat(i,"&ranking=1")}function T(e,t){var n={recipient:t,recipes:e};fetch("http://localhost:5500/mail/",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>console.log(e))).catch((e=>console.log(e)))}fetch("".concat("http://localhost:5500","/api/key")).then((e=>e.text())).then((e=>e)).catch((e=>console.log(e))).then((e=>t.key=e)),window.onload=function(){console.log("clearing all local storage",localStorage),localStorage.clear(),console.log("it should be clear now",localStorage)},console.log("The gangs all here")})();
//# sourceMappingURL=main.js.map